(this.webpackJsonppixely=this.webpackJsonppixely||[]).push([[0],{16:function(e,t,n){e.exports=n(29)},21:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(12),i=n.n(r),c=(n(21),n(2)),l={palette:{selectedIndex:0,colors:["#1a1c2c","#5d275d","#b13e53","#ef7d57","#ffcd75","#a7f070","#38b764","#257179","#29366f","#3b5dc9","#41a6f6","#73eff7","#f4f4f4","#94b0c2","#566c86","#333c57"],selectColor:Object(c.b)((function(e,t){e.selectedIndex=t})),selectedColor:Object(c.c)((function(e){return e.colors[e.selectedIndex]}))},tool:{selected:"pencil",brushSize:1,increaseBrushSize:Object(c.b)((function(e,t){e.brushSize=Math.max(1,e.brushSize+t)})),decreaseBrushSize:Object(c.b)((function(e,t){e.brushSize=Math.max(1,e.brushSize-t)}))},canvas:{width:20,height:20,zoom:30,maxZoom:200,minZoom:1,increaseZoom:Object(c.b)((function(e,t){e.zoom=Math.min(e.maxZoom,e.zoom+t)})),decreaseZoom:Object(c.b)((function(e,t){e.zoom=Math.max(e.minZoom,e.zoom-t)}))}},s=Object(c.d)(l),u=function(e){var t=e.top,n=e.left,a=e.middle,r=e.right;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",color:"#ADADAD"}},o.a.createElement("div",{style:{flex:0,height:48,zIndex:100}},o.a.createElement("div",{style:{backgroundColor:"#333333",width:"100%",height:"100%"}},t)),o.a.createElement("div",{style:{flex:1,display:"flex"}},o.a.createElement("div",{style:{flex:0,maxWidth:64,minWidth:64,zIndex:100}},o.a.createElement("div",{style:{backgroundColor:"#2A2D2E",width:"100%",height:"100%",boxShadow:"rgba(0, 0, 0, 0.4) 0px 5px 10px -10px inset"}},n)),o.a.createElement("div",{style:{flex:1}}),o.a.createElement("div",{style:{flex:0,maxWidth:48,minWidth:48,zIndex:100}},o.a.createElement("div",{style:{backgroundColor:"#2A2D2E",width:"100%",height:"100%",boxShadow:"rgba(0, 0, 0, 0.4) 0px 5px 10px -10px inset"}},r)))),o.a.createElement("div",{style:{bottom:"0px",left:"64px",right:"48px",top:"48px",position:"fixed",display:"block"}},o.a.createElement("div",{style:{backgroundColor:"#1E1E1E",width:"100%",height:"100%",boxShadow:"inset 0px 0px 5px 0px rgba(0, 0, 0, 0.4)"}},a)))},f=(n(25),function(){return o.a.createElement("div",{style:{display:"flex",height:"100%",alignItems:"center"}},o.a.createElement("h2",{style:{fontSize:"1.5rem",margin:0}},"Pixely"))}),h=function(){return o.a.createElement("div",{style:{height:"100%",display:"inline-flex",alignItems:"center"}},o.a.createElement("div",{className:"Menu-items"},o.a.createElement(f,null)),o.a.createElement("button",{className:"Menu-items Menu-button"},"File"),o.a.createElement("button",{className:"Menu-items Menu-button"},"Edit"),o.a.createElement("button",{className:"Menu-items Menu-button"},"Help"))},m=(n(26),function(){return o.a.createElement("svg",{viewBox:"0 0 18.713 18.713",width:"32",height:"32"},o.a.createElement("path",{d:"M13.367,6.434L8.872,1.895l-0.65-0.672L6.687,2.731c-2.624-0.375-4.51,0.59-5.178,1.777   C0.698,5.949,1.527,7.522,1.553,7.57c0.693,1.385,1.689,2.216,2.961,2.473c0.279,0.055,0.56,0.08,0.84,0.08   c1.322,0,2.644-0.561,3.649-1.135c0.271,0.188,0.601,0.299,0.954,0.299c0.93,0,1.686-0.759,1.686-1.691s-0.756-1.69-1.686-1.69   s-1.686,0.758-1.686,1.69c0,0.093,0.013,0.184,0.027,0.274C7.286,8.445,5.951,8.986,4.77,8.748C3.905,8.573,3.237,7.995,2.719,6.96   C2.714,6.95,2.203,5.957,2.654,5.157c0.38-0.676,1.371-1.111,2.883-1.275L5.302,4.119L3.13,6.299   c0.023,0.053,0.04,0.085,0.041,0.087c0.209,0.418,0.444,0.758,0.706,1.03l3.932-3.943c0.187-0.187,0.435-0.29,0.698-0.29   s0.513,0.103,0.698,0.29l4.771,4.787c0.385,0.385,0.385,1.014,0,1.399L7.774,15.88c-0.372,0.373-1.023,0.373-1.396,0l-4.772-4.787   c-0.187-0.186-0.289-0.434-0.289-0.699c0-0.264,0.102-0.514,0.289-0.7l0.515-0.518C1.828,8.874,1.568,8.512,1.335,8.098   l-0.66,0.663C0.24,9.197,0,9.777,0,10.394c0,0.617,0.24,1.197,0.675,1.633l4.772,4.787c0.435,0.436,1.012,0.676,1.628,0.676   c0.614,0,1.193-0.24,1.628-0.676l6.201-6.221L16.205,9.3l-0.361-0.365c0.683-0.373,0.987,2.744,0.987,2.744s0.954,7.439,1.802,0   C19.443,4.56,13.854,6.272,13.367,6.434z",fill:"#fff"}))}),d=function(){return o.a.createElement(m,null)},b=function(){return o.a.createElement("svg",{width:"32",height:"32",viewBox:"0 0 1792 1792"},o.a.createElement("path",{d:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",fill:"#fff"}))},v=function(){return o.a.createElement(b,null)},g=function(){return o.a.createElement("svg",{width:"32",height:"32",viewBox:"0 0 1792 1792"},o.a.createElement("path",{d:"M1698 94q94 94 94 226.5t-94 225.5l-225 223 104 104q10 10 10 23t-10 23l-210 210q-10 10-23 10t-23-10l-105-105-603 603q-37 37-90 37h-203l-256 128-64-64 128-256v-203q0-53 37-90l603-603-105-105q-10-10-10-23t10-23l210-210q10-10 23-10t23 10l104 104 223-225q93-94 225.5-94t226.5 94zm-1186 1378l576-576-192-192-576 576v192h192z",fill:"#fff"}))},x=function(){return o.a.createElement(g,null)},p=function(){return o.a.createElement("svg",{width:"32",height:"32",viewBox:"0 0 1792 1792"},o.a.createElement("path",{d:"M832 1408l336-384h-768l-336 384h768zm1013-1077q15 34 9.5 71.5t-30.5 65.5l-896 1024q-38 44-96 44h-768q-38 0-69.5-20.5t-47.5-54.5q-15-34-9.5-71.5t30.5-65.5l896-1024q38-44 96-44h768q38 0 69.5 20.5t47.5 54.5z",fill:"#fff"}))},E=function(){return o.a.createElement(p,null)},w=function(){return o.a.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center"}},o.a.createElement("button",{className:"Tools-items Tools-button"},o.a.createElement(v,null)),o.a.createElement("button",{className:"Tools-items Tools-button"},o.a.createElement(E,null)),o.a.createElement("button",{className:"Tools-items Tools-button"},o.a.createElement(x,null)),o.a.createElement("button",{className:"Tools-items Tools-button"},o.a.createElement(d,null)))},y=(n(27),Object(c.e)()),j=y.useStoreActions,O=(y.useStoreDispatch,y.useStoreState),C=function(){return o.a.createElement("svg",{width:"30",height:"30",viewBox:"0 0 1792 1792"},o.a.createElement("path",{d:"M1600 736v192q0 40-28 68t-68 28h-416v416q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-416h-416q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h416v-416q0-40 28-68t68-28h192q40 0 68 28t28 68v416h416q40 0 68 28t28 68z",fill:"#fff"}))},S=function(){var e=O((function(e){return e.palette.colors})),t=j((function(e){return e.palette.selectColor}));return o.a.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center"}},e.map((function(e,n){return o.a.createElement("button",{key:n,onClick:(a=n,function(){t(a)}),className:"ColorPalette-items ColorPalette-button",style:{backgroundColor:e,flex:1}});var a})),o.a.createElement("button",{className:"ColorPalette-items ColorPalette-button",style:{minHeight:48,maxHeight:48,flex:0}},o.a.createElement(C,null)))},z=n(4),M=n(1),q=function(e,t){var n=t.x,a=t.y,o=t.color,r=e.ctx,i=e.brushSize;r.fillStyle=o,r.fillRect(n,a,i,i)},k=function(e){var t=e.min,n=e.max;return function(e){return Math.min(Math.max(e,t),n)}},N=(n(28),n(8)),P=o.a.memo((function(e){var t=e.width,n=e.height,a=e.animatedStyleProps,r=e.canvasRefCallback,i=e.bindGesture,c=e.style,l=e.className,s=i?i():{};return o.a.createElement(N.a.canvas,Object.assign({},s,{ref:r,width:t,height:n,className:"Canvas-pixelated "+l,style:Object(z.a)(Object(z.a)({},c),a)}))})),R=n(15),A={transparentGridSize:2,transparentFirstColor:"#B4AEB7",transparentSecondColor:"#CCC8CE",animatedStyleProps:{}},B=function(e){return e},L=function(e){var t=B(e),n=t.transparentGridSize,r=t.transparentFirstColor,i=t.transparentSecondColor,c=t.animatedStyleProps,l=O((function(e){return e.palette.selectedColor})),s=O((function(e){return e.tool.brushSize})),u=O((function(e){return e.canvas.zoom})),f=O((function(e){return e.canvas.width})),h=O((function(e){return e.canvas.height})),m=function(e){return Object.freeze({ctx:(e||v).current.getContext("2d"),width:f,height:h,brushSize:s})};Object(a.useEffect)((function(){var e=m();e.ctx.imageSmoothingEnabled=!0,function(e){var t=e.ctx,n=e.width,a=e.height;t.clearRect(0,0,n,a)}(e);var t=m(E);t.ctx.imageSmoothingEnabled=!0,function(e,t){for(var n=t.squareSize,a=t.firstColor,o=t.secondColor,r=e.width,i=e.height,c=Math.ceil(r/n),l=a,s=0;s<i;s+=n){for(var u=0;u<r;u+=n)q(Object(z.a)(Object(z.a)({},e),{},{brushSize:n}),{x:u,y:s,color:l}),l=l===a?o:a;c%2===0&&(l=l===a?o:a)}}(t,{squareSize:n,firstColor:r,secondColor:i})}),[]);var d=D(),b=Object(M.a)(d,2),v=b[0],g=b[1],x=D(),p=Object(M.a)(x,2),E=p[0],w=p[1],y=Object(R.a)({onDrag:function(e){var t=Object(M.a)(e.previous,2),n=t[0],a=t[1],o=Object(M.a)(e.xy,2),r=o[0],i=o[1],c=v.current.getBoundingClientRect(),s=Math.floor((n-c.left)/u),f=Math.floor((a-c.top)/u),h=Math.floor((r-c.left)/u),d=Math.floor((i-c.top)/u);(function(e,t){var n=e.width,a=e.height,o=t.x,r=t.y;return!(o<0||o>=n||r<0||r>=a)})(m(),{x:s,y:f})&&function(e,t){var n=t.x0,a=t.y0,o=t.x1,r=t.y1,i=t.color,c=e.width,l=e.height,s=k({min:0,max:c-1}),u=k({min:0,max:l-1});n=s(n),a=u(a),o=s(o),r=u(r);for(var f=Math.abs(o-n),h=Math.abs(r-a),m=n<o?1:-1,d=a<r?1:-1,b=f-h;q(e,{x:n,y:a,color:i}),n!==o||a!==r;){var v=2*b;v>-h&&(b-=h,n+=m),v<f&&(b+=f,a+=d)}}(m(),{x0:s,y0:f,x1:h,y1:d,color:l})}});return o.a.createElement(o.a.Fragment,null,o.a.createElement(P,{canvasRefCallback:w,width:f,height:h,animatedStyleProps:c,className:"Canvas-background"}),o.a.createElement(P,{canvasRefCallback:g,width:f,height:h,bindGesture:y,animatedStyleProps:c,className:"Canvas-main"}))};L.defaultProps=A;var D=function(){var e=Object(a.useRef)(),t=Object(a.useCallback)((function(t){t&&(e.current=t)}),[]);return[e,t]},W=function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.liveMeasure,n=void 0===t||t,o=Object(a.useState)(),r=Object(M.a)(o,2),i=r[0],c=r[1],l=Object(a.useState)(),s=Object(M.a)(l,2),u=s[0],f=s[1],h=Object(a.useCallback)((function(e){e&&f(e)}),[]);return Object(a.useLayoutEffect)((function(){if(u){var e=function(){window.requestAnimationFrame((function(){if(u){var e=u.getBoundingClientRect();c(e)}}))};if(e(),n)return window.addEventListener("resize",e),window.addEventListener("scroll",e),function(){window.removeEventListener("resize",e),window.removeEventListener("scroll",e)}}}),[u,n]),[h,i,u]}(),t=Object(M.a)(e,2),n=t[0],r=t[1],i=j((function(e){return e.canvas.increaseZoom})),c=j((function(e){return e.canvas.decreaseZoom})),l=O((function(e){return e.canvas.zoom})),s=O((function(e){return e.canvas.width})),u=O((function(e){return e.canvas.height})),f=Object(a.useState)({x:0,y:0}),h=Object(M.a)(f,2),m=h[0],d=h[1],b=T({width:s,height:u,zoom:l,parentDomRect:r,wheelXy:m});return o.a.createElement("div",{ref:n,onWheel:function(e){var t=e.deltaY;t<0?i(-t/30):c(t/30),d({x:e.clientX,y:e.clientY})},style:{width:"100%",height:"100%"}},o.a.createElement(L,{animatedStyleProps:b}))},I=function(e){return e%2===0?e:e+1},T=function(e){var t=e.width,n=e.height,o=e.zoom,r=e.parentDomRect,i=e.wheelXy,c=Object(N.b)((function(){return{width:o*t,height:o*n}})),l=Object(M.a)(c,2),s=l[0],u=l[1];Object(a.useEffect)((function(){u({width:o*t,height:o*n})}),[t,n,o,u]);var f=Z(o),h=Object(N.b)((function(){return{left:0,top:0}})),m=Object(M.a)(h,2),d=m[0],b=m[1],v=Object(a.useState)({left:0,top:0}),g=Object(M.a)(v,2),x=g[0],p=g[1];Object(a.useEffect)((function(){b(x)}),[x,b]);var E=Object(a.useState)(!1),w=Object(M.a)(E,2),y=w[0],j=w[1];return Object(a.useEffect)((function(){y||r&&(j(!0),p({left:I(Math.floor((r.width-t*o)/2)),top:I(Math.floor((r.height-n*o)/2))}))}),[t,n,o,y,r]),Object(a.useEffect)((function(){if(y&&0!==x.left){var e=r?{x:i.x-r.x,y:i.y-r.y}:{x:0,y:0},t=(e.x-x.left)/f*(o-f),n=(e.y-x.top)/f*(o-f);(Math.abs(t)>2||Math.abs(n)>2)&&p({left:I(Math.floor(x.left-t)),top:I(Math.floor(x.top-n))})}}),[t,n,f,x,o,y,r,i.x,i.y]),Object(z.a)(Object(z.a)({},s),d)},Z=function(e){var t=Object(a.useRef)(e);return Object(a.useEffect)((function(){t.current=e}),[e]),t.current},F=function(){return o.a.createElement(c.a,{store:s},o.a.createElement(u,{top:o.a.createElement(h,null),left:o.a.createElement(w,null),middle:o.a.createElement(W,null),right:o.a.createElement(S,null)}))},G=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function H(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(o.a.createElement(F,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/pixely",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/pixely","/service-worker.js");G?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):H(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):H(t,e)}))}}()}},[[16,1,2]]]);
//# sourceMappingURL=main.c31de435.chunk.js.map